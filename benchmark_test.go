package openrtb

import (
	"encoding/json"
	"testing"

	"github.com/pquerna/ffjson/ffjson"
)

var requests = [][]byte{
	[]byte(`{"id":"0cb77042-79d4-4f53-a582-f4c8ffc2a55a","imp":[{"id":"1","banner":{"w":728,"h":90,"pos":3,"btype":[1],"battr":[1,2,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":341}}}],"site":{"id":"rubicon_15756","domain":"zoopla.co.uk","cat":["IAB21"],"page":"http://www.zoopla.co.uk/to-rent/flats/kingston-upon-thames/?include_retirement_homes=true\u0026beds_min=1\u0026price_max=1500\u0026property_type=flats\u0026price_min=1250\u0026q=Kingston%20upon%20Thames\u0026search_source=home\u0026radius=0\u0026price_frequency=per_month\u0026pn=2","privacypolicy":0,"publisher":{"id":"rubicon_9208","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.124 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"G1","city":"Isleworth","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"a01ec10c-9aa1-4549-8a9d-27bb5a8859cc","imp":[{"id":"1","banner":{"w":300,"h":600,"pos":1,"btype":[1],"battr":[1,2,3,5,9,12,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":134}}}],"site":{"id":"rubicon_15047","domain":"dailymotion.com","cat":["IAB1"],"page":"http://www.dailymotion.com/video/xkjccs_bcd-series-1-episode-1-part-b_animals","privacypolicy":0,"publisher":{"id":"rubicon_8769","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.101 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"B1","city":"Bolton","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"1a3ba7dc-d6d5-400c-b286-282813343af7","imp":[{"id":"1","banner":{"w":160,"h":600,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":140}}}],"site":{"id":"rubicon_16794","domain":"ebay.co.uk","cat":["IAB1","IAB22"],"page":"http://www.ebay.co.uk/sch/i.html?_from=R40\u0026_trksid=p2050601.m570.l1313.TR0.TRC0.H0.X1%2F72 bases\u0026_nkw=1%2F72 bases\u0026_sacat=0","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Linux; U; Android 4.1.1; en-gb; PMP5880D Build/PMP5880D_v1.0.3_20121212) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Safari/534.30","ip":"127.0.0.1","geo":{"country":"GB","region":"F2","city":"Havant","zip":"PO9"},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"8e0ecf05-dad2-4c5d-9ec4-39b0097fa545","imp":[{"id":"1","banner":{"w":160,"h":600,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":1}}}],"site":{"id":"rubicon_25464","domain":"ebay.co.uk","cat":["IAB22"],"page":"http://www.ebay.co.uk/sch/i.html?_from=R40\u0026_trksid=p3984.m570.l1311.R4.TR11.TRC1.A0.H0.Xcar c\u0026_nkw=car cover\u0026_sacat=0","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko","ip":"127.0.0.1","geo":{"country":"GB","region":"E6","city":"Gloucester","zip":"GL2"},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"a27f3dca-b2c7-40dd-a5af-7a8d4de515b5","imp":[{"id":"1","banner":{"w":728,"h":90,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":11}}}],"site":{"id":"rubicon_16794","domain":"ebay.co.uk","cat":["IAB1","IAB22"],"page":"http://www.ebay.co.uk/sch/i.html?_odkw=kickers\u0026LH_Auction=1\u0026_from=R40%7CR40\u0026_osacat=2984\u0026_from=R40\u0026_trksid=p2045573.m570.l1311.R1.TR9.TRC1.A0.H0.Xpom d\u0026_nkw=pom d%27api\u0026_sacat=0","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.2; WOW64; rv:32.0) Gecko/20100101 Firefox/32.0","ip":"127.0.0.1","geo":{"country":"GB","region":"C6","city":"Camborne","zip":"TR14"},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"8aaaacbb-1949-47aa-a38a-78c5e5b5cca3","imp":[{"id":"1","banner":{"w":160,"h":600,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":1}}}],"site":{"id":"rubicon_25464","domain":"ebay.co.uk","cat":["IAB22"],"page":"http://www.ebay.co.uk/mbf/Summary?MyEbay\u0026gbh=1","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 5.1; rv:32.0) Gecko/20100101 Firefox/32.0","ip":"127.0.0.1","geo":{"country":"GB","region":"M3","city":"Yeovil","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"7031fc49-1239-48b1-98f6-37b6507564fe","imp":[{"id":"1","banner":{"w":300,"h":250,"pos":3,"btype":[1],"battr":[1,2,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":78}}}],"site":{"id":"rubicon_27664","domain":"mumsnet.com","cat":["IAB6-7","IAB6","IAB6-1","IAB6-2","IAB6-5"],"page":"http://www.mumsnet.com/Talk/_chat","privacypolicy":0,"publisher":{"id":"rubicon_11180","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1985.131 Mobile Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"Z5","city":"Bedford","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"062e27d5-e3af-4706-af5f-af5be14437af","imp":[{"id":"1","banner":{"w":300,"h":250,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":5}}}],"site":{"id":"rubicon_12768","domain":"icscotland.co.uk","cat":["IAB12"],"page":"http://www.liverpoolecho.co.uk/sport/sport-opinion/john-aldridge-raheem-sterling-brave-7930547","privacypolicy":0,"publisher":{"id":"rubicon_7949","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.124 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"H9","city":"London","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"dd249a7c-d3c9-486c-a49e-da5034cb0201","imp":[{"id":"1","banner":{"w":300,"h":250,"pos":3,"btype":[1],"battr":[1,2,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":2}}}],"site":{"id":"rubicon_12791","domain":"radiotimes.com","cat":["IAB1"],"page":"http://www.radiotimes.com/tv/tv-listings","privacypolicy":0,"publisher":{"id":"rubicon_7959","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (iPad; CPU OS 6_1_3 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10B329","ip":"127.0.0.1","geo":{"country":"GB","region":"J7","city":"Tadcaster","zip":"LS24"},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"70706dbc-b150-4437-a0ed-f77f8aeeff08","imp":[{"id":"1","banner":{"w":300,"h":250,"pos":3,"btype":[1],"battr":[1,2,8,9,10,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":575}}}],"site":{"id":"rubicon_28366","domain":"onthebox.com","cat":["IAB1-7","IAB1-5","IAB1","IAB1-6"],"page":"http://onthebox.com/landing.html#/","privacypolicy":0,"publisher":{"id":"rubicon_11232","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.124 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"R3","city":"Belfast","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"480b61d3-5e5e-4391-81a1-29b31e44ab31","imp":[{"id":"1","banner":{"w":160,"h":600,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":32}}}],"site":{"id":"rubicon_16794","domain":"ebay.co.uk","cat":["IAB1","IAB22"],"page":"http://www.ebay.co.uk/sch/i.html?_from=R40\u0026_trksid=p2047675.m570.l1313.TR0.TRC0.H0.Xwhite fabric with small pink roses\u0026_nkw=white fabric with small pink roses\u0026_sacat=0","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; yie11; rv:11.0) like Gecko","ip":"127.0.0.1","geo":{"country":"GB","region":"H9","city":"London","zip":"SW1P"},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"0ad4a046-9baa-4bac-ac1a-f6e04de2f8de","imp":[{"id":"1","banner":{"w":728,"h":90,"pos":1,"btype":[1],"battr":[1,3,8,9,10,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":2}}}],"site":{"id":"rubicon_16742","domain":"globalpersonals.co.uk","cat":["IAB14-1","IAB14"],"page":"http://uk.love2meet.com/member/inbox/conversation.cfm?hadcommsboltons=0\u0026utm_campaign=UK General\u0026utm_content=TextLink-SiteName\u0026utm_medium=notification\u0026utm_source=wldemail\u0026utm_term=130\u0026with=39086185","privacypolicy":0,"publisher":{"id":"rubicon_9302","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko","ip":"127.0.0.1","geo":{"country":"GB","region":"","city":"","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"2f18a2f4-4e51-4d47-88f8-3e0c228b43c5","imp":[{"id":"1","banner":{"w":728,"h":90,"pos":3,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":1},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":2}}}],"site":{"id":"rubicon_26534","domain":"archant.co.uk","cat":["IAB12-3"],"page":"http://www.hertsad.co.uk/news/woman_taken_to_hospital_in_serious_condition_after_collapsing_in_st_albans_1_3804793","privacypolicy":0,"publisher":{"id":"rubicon_11022","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.101 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"H1","city":"Clapham","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"1c6e760b-50dc-4930-b1ad-6a117fff2005","imp":[{"id":"1","banner":{"w":728,"h":90,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":898}}}],"site":{"id":"rubicon_16794","domain":"ebay.co.uk","cat":["IAB1","IAB22"],"page":"http://www.ebay.co.uk/sch/i.html?_nkw=diecast soldiers\u0026_pgn=2\u0026_skc=50\u0026rt=nc","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.101 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"L9","city":"Sheffield","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"602c860e-0ebc-45fa-be5c-d3c9c93b88aa","imp":[{"id":"1","banner":{"w":160,"h":600,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":2}}}],"site":{"id":"rubicon_25464","domain":"ebay.co.uk","cat":["IAB22"],"page":"http://www.ebay.co.uk/sch/i.html?_from=R40\u0026_sacat=0\u0026_sop=7\u0026_nkw=porch awning\u0026_pgn=2\u0026_skc=50\u0026rt=nc","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.124 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"M9","city":"Stafford","zip":"ST18"},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"fc165140-2b27-4e3d-958b-b871406465b8","imp":[{"id":"1","banner":{"w":300,"h":250,"pos":3,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":1},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":22}}}],"site":{"id":"rubicon_29278","domain":"johnstonpress.co.uk","cat":["IAB12-3","IAB12-1","IAB12-2"],"page":"http://www.scotsman.com/login?referrer=http%3a%2f%2fwww.scotsman.com%2fbusiness%2fretail%2fretailers-see-worst-september-slump-since-crash-1-3571404","privacypolicy":0,"publisher":{"id":"rubicon_11022","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.101 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"U8","city":"Edinburgh","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"4bd2d53c-11c1-45bf-8a01-4445a756f1fc","imp":[{"id":"1","banner":{"w":320,"h":50,"pos":1,"btype":[1],"battr":[1,2,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":2}}}],"site":{"id":"rubicon_25794","domain":"dailyrecord.co.uk","cat":["IAB12"],"page":"http://www.walesonline.co.uk/news/wales-news/judy-finnigan-sorry-ched-evans-7930478","privacypolicy":0,"publisher":{"id":"rubicon_7949","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Linux; U; Android 4.3; en-gb; GT-I9300 Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30","ip":"127.0.0.1","geo":{"country":"GB","region":"X4","city":"Caerphilly","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"7c428f55-f45a-4954-9fbd-d1a43c5cd8aa","imp":[{"id":"1","banner":{"w":160,"h":600,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":2}}}],"site":{"id":"rubicon_25464","domain":"ebay.co.uk","cat":["IAB22"],"page":"http://www.ebay.co.uk/sch/i.html?_odkw=\u0026_osacat=63866\u0026_from=R40\u0026_trksid=p2045573.m570.l2632.R2.TR11.TRC1.A0.H0.Xcream jum\u0026_nkw=cream jumper\u0026_sacat=15724","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.124 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"K4","city":"Plymouth","zip":"PL6"},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"5c263d6c-0004-4e6b-b3f3-e61aee193d74","imp":[{"id":"1","banner":{"w":300,"h":250,"pos":3,"btype":[1],"battr":[1,2,3,5],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":117}}}],"site":{"id":"rubicon_36878","domain":"mangahere.co","cat":["IAB9-10","IAB1-5","IAB9-12","IAB9-7","IAB1-2","IAB1-6","IAB9-11","IAB1-1","IAB1-7","IAB1-3","IAB9-25","IAB9-5","IAB9-30","IAB9-13","IAB1-4"],"page":"http://www.mangahere.co/manga/nanatsu_no_taizai/c009/11.html","privacypolicy":0,"publisher":{"id":"rubicon_10613","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.101 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"L8","city":"Southport","zip":"PR8"},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"0d9dee1d-c51e-4231-b523-a82eb8683e2c","imp":[{"id":"1","banner":{"w":300,"h":250,"pos":3,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":1},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":3}}}],"site":{"id":"rubicon_12768","domain":"icscotland.co.uk","cat":["IAB12"],"page":"http://www.chroniclelive.co.uk/news/north-east-news/your-homes-newcastle-worker-elaine-6746592","privacypolicy":0,"publisher":{"id":"rubicon_7949","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:16.0) Gecko/20100101 Firefox/16.0","ip":"127.0.0.1","geo":{"country":"GB","region":"N6","city":"Washington","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"345a3312-ce4a-4768-808d-fabfed35e7bc","imp":[{"id":"1","banner":{"w":728,"h":90,"pos":3,"btype":[1],"battr":[1,2,3,5,9,12,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":37}}}],"site":{"id":"rubicon_15047","domain":"dailymotion.com","cat":["IAB1"],"page":"http://www.dailymotion.com/video/x27ioua_imperio-cap68_shortfilms","privacypolicy":0,"publisher":{"id":"rubicon_8769","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.101 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"H4","city":"Leicester","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"939d8e72-7732-4230-af55-165e6dc06487","imp":[{"id":"1","banner":{"w":160,"h":600,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":5}}}],"site":{"id":"rubicon_16794","domain":"ebay.co.uk","cat":["IAB1","IAB22"],"page":"http://www.ebay.co.uk/sch/i.html?_odkw=sat nav 7 inch\u0026Brand=TomTom\u0026_from=R40%7CR40\u0026_dcat=156955\u0026_osacat=3270\u0026_from=R40\u0026_trksid=p2045573.m570.l1311.R3.TR11.TRC1.A0.H2.Xtom tom\u0026_nkw=tomtom sat nav\u0026_sacat=3270","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.124 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"H9","city":"London","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
	[]byte(`{"id":"cf735431-0dd5-4a98-9805-dcbfcfa5871f","imp":[{"id":"1","banner":{"w":728,"h":90,"pos":0,"btype":[1],"battr":[1,3,5,8,9,10,12,13,14],"topframe":0},"instl":0,"bidfloor":0.0108,"bidfloorcur":"USD","secure":0,"ext":{"rubicon":{"site_size_session_count":12}}}],"site":{"id":"rubicon_16794","domain":"ebay.co.uk","cat":["IAB1","IAB22"],"page":"http://www.ebay.co.uk/myb/SavedSellers?ssPageName=STRK:ME:LNLK:MEFSX\u0026_trksid=p3984.m2034.l3390","privacypolicy":0,"publisher":{"id":"rubicon_9456","name":""}},"device":{"dnt":0,"ua":"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.124 Safari/537.36","ip":"127.0.0.1","geo":{"country":"GB","region":"Z1","city":"Swansea","zip":""},"language":"en","js":0,"connectiontype":0,"devicetype":0},"user":{"id":"aa112233-baab-baab-dddd-27bb558859cc"},"at":2,"wseat":["59"],"cur":["USD"],"bcat":["BSW1","BSW4","BSW10","IAB25-3","BSW2","IAB26"],"ext":{"is_secure":0,"ssp":"rubicon"}}`),
}

func BenchmarkUnmarshalRequest(b *testing.B) {
	for i := 0; i < b.N; i++ {
		req := &Request{}
		json.Unmarshal(requests[i%len(requests)], req)
	}
}

func BenchmarkUnmarshalRequestFF(b *testing.B) {
	for i := 0; i < b.N; i++ {
		req := &Request{}
		ffjson.Unmarshal(requests[i%len(requests)], req)
	}
}
